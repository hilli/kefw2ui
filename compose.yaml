# KEF W2 Speaker Controller UI

services:
  kefw2ui:
    build: .
    image: ghcr.io/hilli/kefw2ui:latest
    container_name: kefw2ui
    ports:
      - "8080:8080"
    volumes:
      # Share config with CLI - adjust path for your OS
      # Linux: ~/.config/kefw2
      # macOS: ~/Library/Application Support/kefw2
      - ${HOME}/.config/kefw2:/home/kefw2ui/.config/kefw2
      # Tailscale state persistence (only needed when TS_ENABLED=true)
      - tailscale-state:/data/tailscale
    # network_mode: host is required for mDNS speaker discovery
    # If you don't need auto-discovery, you can remove this and manually add speakers
    network_mode: host
    restart: unless-stopped
    environment:
      - TZ=${TZ:-UTC}
      # Tailscale (uncomment to enable)
      # - TS_ENABLED=true
      # - TS_HOSTNAME=kefw2ui
      # - TS_AUTHKEY=tskey-auth-xxxxx
      # - TS_STATE_DIR=/data/tailscale

volumes:
  tailscale-state:
